# [90. 子集 II](https://leetcode-cn.com/problems/subsets-ii/)

> 给你一个整数数组 nums ，其中可能包含重复元素，请你返回该数组所有可能的子集（幂集）。
>
> 解集 不能 包含重复的子集。返回的解集中，子集可以按 任意顺序 排列。

**示例 1：**

```tex
输入：nums = [1,2,2]
输出：[[],[1],[1,2],[1,2,2],[2],[2,2]]
```

**示例 2：**

```tex
输入：nums = [0]
输出：[[],[0]]
```

## 分析阶段



### 1、问题类型



### 2、解题思路







## 编码阶段

```java
public class Solution {

    public static void main(String[] args) {
        String s = "103574606193";
        System.out.println("========" + new Solution().restoreIpAddresses(s));

    }

    public List<String> restoreIpAddresses(String s) {
        if (s.length() < 4) {
            return new ArrayList<>();
        }
        if (s.length() > 12) {
            return new ArrayList<>();
        }
        if (s.length() == 4) {
            String res = s.charAt(0) + "." + s.charAt(1) + "." + s.charAt(2) + "." + s.charAt(3);
            return Collections.singletonList(res);
        }

        List<String> res = new ArrayList<>();
        List<String> path = new ArrayList<>(s.length());

        backtrack(res, path, s, 0, 0);
        return res;
    }

    public void backtrack(List<String> res, List<String> path, String s, int ipSeg, int start) {
        if (ipSeg > 3) {
            if (start == s.length()) {
                res.add(String.join(".", path));
            }
            return;
        }

        for (int end = start + 1; end <= s.length(); end++) {
            String sub = s.substring(start, end);
            if (!isValid(sub)) {
                continue;
            }

            path.add(sub);
            backtrack(res, path, s, ipSeg + 1, end);
            path.remove(path.size() - 1);
        }
    }

    private boolean isValid(String sub) {
        // 长度大于三，不符合IP规范
        if (sub.length() > 3 || sub.length() < 1) {
            return false;
        } else {
            // 长度为1，任何值都可以
            if (sub.length() == 1) {
                return true;
            } else {
                if (sub.charAt(0) == '0') {
                    return false;
                } else {
                    return Integer.parseInt(sub) <= 255;
                }
            }
        }
    }

}
```

## 总结阶段